<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.60">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/images/favicon.png"><title>Developer Documentation | Parabox</title><meta name="description" content="User documentation and development documentation of Parabox.">
    <link rel="preload" href="/assets/style-fae0be7d.css" as="style"><link rel="stylesheet" href="/assets/style-fae0be7d.css">
    <link rel="modulepreload" href="/assets/app-2d8419d4.js"><link rel="modulepreload" href="/assets/framework-204010b2.js"><link rel="modulepreload" href="/assets/developer.html-547c3f41.js"><link rel="modulepreload" href="/assets/1-47e025b6.js"><link rel="modulepreload" href="/assets/developer.html-1f117d1c.js"><link rel="prefetch" href="/assets/developer.html-3af3bdda.js" as="script"><link rel="prefetch" href="/assets/faq.html-d9097bdb.js" as="script"><link rel="prefetch" href="/assets/how-it-works.html-29331dc3.js" as="script"><link rel="prefetch" href="/assets/index.html-dfe14ef6.js" as="script"><link rel="prefetch" href="/assets/parabox-development-kit.html-bd67a8e2.js" as="script"><link rel="prefetch" href="/assets/privacy.html-033f2cd4.js" as="script"><link rel="prefetch" href="/assets/quick-start.html-5e001fd5.js" as="script"><link rel="prefetch" href="/assets/terms.html-a6f89da4.js" as="script"><link rel="prefetch" href="/assets/faq.html-9c448633.js" as="script"><link rel="prefetch" href="/assets/how-it-works.html-d19c2181.js" as="script"><link rel="prefetch" href="/assets/index.html-8a2a46e2.js" as="script"><link rel="prefetch" href="/assets/privacy.html-0831415d.js" as="script"><link rel="prefetch" href="/assets/quick-start.html-2c2709f0.js" as="script"><link rel="prefetch" href="/assets/terms.html-bea71aba.js" as="script"><link rel="prefetch" href="/assets/404.html-f9875e7b.js" as="script"><link rel="prefetch" href="/assets/developer.html-de617657.js" as="script"><link rel="prefetch" href="/assets/faq.html-3978a4c0.js" as="script"><link rel="prefetch" href="/assets/how-it-works.html-e2f0db04.js" as="script"><link rel="prefetch" href="/assets/index.html-e4a5ae15.js" as="script"><link rel="prefetch" href="/assets/parabox-development-kit.html-8667eb06.js" as="script"><link rel="prefetch" href="/assets/privacy.html-9e5807d8.js" as="script"><link rel="prefetch" href="/assets/quick-start.html-e69c9373.js" as="script"><link rel="prefetch" href="/assets/terms.html-324eb609.js" as="script"><link rel="prefetch" href="/assets/faq.html-c0e747c9.js" as="script"><link rel="prefetch" href="/assets/how-it-works.html-bbf489c2.js" as="script"><link rel="prefetch" href="/assets/index.html-5155efce.js" as="script"><link rel="prefetch" href="/assets/privacy.html-1e6a8a2e.js" as="script"><link rel="prefetch" href="/assets/quick-start.html-66654763.js" as="script"><link rel="prefetch" href="/assets/terms.html-f2b4cb51.js" as="script"><link rel="prefetch" href="/assets/404.html-d1e63d77.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/en/" class=""><img class="logo" src="/images/app.png" alt="Parabox"><span class="site-name can-hide">Parabox</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Welcome"><span class="title">Welcome</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Welcome"><span class="title">Welcome</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/en/" class="" aria-label="Welcome"><!--[--><!--]--> Welcome <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/en/how-it-works/" class="" aria-label="How it works"><!--[--><!--]--> How it works <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/en/terms/" class="" aria-label="Terms of Service"><!--[--><!--]--> Terms of Service <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/en/privacy/" class="" aria-label="Privacy Policy"><!--[--><!--]--> Privacy Policy <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/en/quick-start/" class="" aria-label="Quick Start"><!--[--><!--]--> Quick Start <!--[--><!--]--></a></div><div class="navbar-item"><a href="/en/faq/" class="" aria-label="FAQ"><!--[--><!--]--> FAQ <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Developer Docs"><span class="title">Developer Docs</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Developer Docs"><span class="title">Developer Docs</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/en/developer/" class="" aria-label="Developer Docs"><!--[--><!--]--> Developer Docs <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/en/parabox-development-kit/" class="" aria-label="SDK Docs"><!--[--><!--]--> SDK Docs <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/developer.html" class="" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/en/developer.html" class="router-link-active router-link-exact-active router-link-active" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/Parabox-App/parabox" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="Search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Welcome"><span class="title">Welcome</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Welcome"><span class="title">Welcome</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/en/" class="" aria-label="Welcome"><!--[--><!--]--> Welcome <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/en/how-it-works/" class="" aria-label="How it works"><!--[--><!--]--> How it works <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/en/terms/" class="" aria-label="Terms of Service"><!--[--><!--]--> Terms of Service <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/en/privacy/" class="" aria-label="Privacy Policy"><!--[--><!--]--> Privacy Policy <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/en/quick-start/" class="" aria-label="Quick Start"><!--[--><!--]--> Quick Start <!--[--><!--]--></a></div><div class="navbar-item"><a href="/en/faq/" class="" aria-label="FAQ"><!--[--><!--]--> FAQ <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Developer Docs"><span class="title">Developer Docs</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Developer Docs"><span class="title">Developer Docs</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/en/developer/" class="" aria-label="Developer Docs"><!--[--><!--]--> Developer Docs <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/en/parabox-development-kit/" class="" aria-label="SDK Docs"><!--[--><!--]--> SDK Docs <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/developer.html" class="" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/en/developer.html" class="router-link-active router-link-exact-active router-link-active" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/Parabox-App/parabox" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">Developer Documentation <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/en/developer.html#development-environment" class="router-link-active router-link-exact-active sidebar-item" aria-label="Development environment"><!--[--><!--]--> Development environment <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/en/developer.html#development-tools" class="router-link-active router-link-exact-active sidebar-item" aria-label="Development Tools"><!--[--><!--]--> Development Tools <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/en/developer.html#development-language" class="router-link-active router-link-exact-active sidebar-item" aria-label="Development Language"><!--[--><!--]--> Development Language <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/en/developer.html#start-with-template-project" class="router-link-active router-link-exact-active sidebar-item" aria-label="Start with template project"><!--[--><!--]--> Start with template project <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/en/developer.html#download-template-project" class="router-link-active router-link-exact-active sidebar-item" aria-label="Download template project"><!--[--><!--]--> Download template project <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/en/developer.html#architecture-overview" class="router-link-active router-link-exact-active sidebar-item" aria-label="Architecture overview"><!--[--><!--]--> Architecture overview <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/en/developer.html#configuration" class="router-link-active router-link-exact-active sidebar-item" aria-label="Configuration"><!--[--><!--]--> Configuration <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/en/developer.html#development-guidelines" class="router-link-active router-link-exact-active sidebar-item" aria-label="Development Guidelines"><!--[--><!--]--> Development Guidelines <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/en/developer.html#communication-mechanism" class="router-link-active router-link-exact-active sidebar-item" aria-label="Communication Mechanism"><!--[--><!--]--> Communication Mechanism <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/en/developer.html#common-use-cases" class="router-link-active router-link-exact-active sidebar-item" aria-label="Common Use Cases"><!--[--><!--]--> Common Use Cases <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/en/developer.html#from-scratch" class="router-link-active router-link-exact-active sidebar-item" aria-label="From Scratch"><!--[--><!--]--> From Scratch <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="developer-documentation" tabindex="-1"><a class="header-anchor" href="#developer-documentation" aria-hidden="true">#</a> Developer Documentation</h1><p>Welcome to the developer documentation. The necessary guidelines and resources for developing Parabox plugins are included here.</p><p>Plug-ins are one of the core concepts of Parabox, they can provide Parabox with a variety of sources of information. Parabox itself does not provide information sources, but implements these functions through plug-ins.</p><h2 id="development-environment" tabindex="-1"><a class="header-anchor" href="#development-environment" aria-hidden="true">#</a> Development environment</h2><h3 id="development-tools" tabindex="-1"><a class="header-anchor" href="#development-tools" aria-hidden="true">#</a> Development Tools</h3><p>Android Studio Chipmunk | 2021.2.1 or later</p><ul><li><a href="https://developer.android.com/studio" target="_blank" rel="noopener noreferrer">Android Studio<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h3 id="development-language" tabindex="-1"><a class="header-anchor" href="#development-language" aria-hidden="true">#</a> Development Language</h3><ul><li><a href="https://kotlinlang.org/" target="_blank" rel="noopener noreferrer">Kotlin<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h2 id="start-with-template-project" tabindex="-1"><a class="header-anchor" href="#start-with-template-project" aria-hidden="true">#</a> Start with template project</h2><p>We provide a template project. The template project contains the SDK and completes the basic schema setup. You can quickly start developing your plugin from it.</p><h3 id="download-template-project" tabindex="-1"><a class="header-anchor" href="#download-template-project" aria-hidden="true">#</a> Download template project</h3><p>Use the following command to clone the <a href="https://github.com/Parabox-App/parabox-extension-example" target="_blank" rel="noopener noreferrer">GitHub<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> repository:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">git</span> clone https://github.com/Parabox-App/parabox-extension-example.git
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Or download the zip file: <a href="https://github.com/Parabox-App/parabox-extension-example/releases" target="_blank" rel="noopener noreferrer">Download<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="architecture-overview" tabindex="-1"><a class="header-anchor" href="#architecture-overview" aria-hidden="true">#</a> Architecture overview</h3><p>The following shows the directory structure under <code>app/src/main</code>:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>main:
│  AndroidManifest.xml
├─java
│  └─com
│      └─parabox
│          └─example
│              │  MainActivity.kt                // *Core Activity
│              ├─core
│              │  │  HiltApplication.kt          // Dagger-hilt
│              │  └─util
│              │          DataStore.kt           // DataStore to store plugin settings
│              │          NotificationUtil.kt    // Foreground Service Notification
│              ├─domain
│              │  ├─service
│              │  │      ConnService.kt          // *Core Service
│              │  └─util
│              │          CustomKey.kt           // Constants used by the connector
│              │          ServiceStatus.kt       // Service status encapsulation for front-end display
│              └─ui
│                  ├─main
│                  │      MainScreen.kt          // Composable
│                  │      MainViewModel.kt       // ViewModel
│                  ├─theme
│                  │      Color.kt
│                  │      Theme.kt
│                  │      Type.kt
│                  └─util
│                          Preference.kt         // Preference Composable
└─res  
    ├─values
    │      colors.xml
    │      strings.xml                           // String Resource
    │      themes.xml
    └─xml
            backup_rules.xml
            data_extraction_rules.xml
            
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>Note: <strong>ConnService</strong> path and naming are strictly limited, please do not move or rename.</p></blockquote><p>Plugin functionality is undertaken by <code>MainActivity</code> (inherited from ParaboxActivity) and <code>ConnService</code> (inherited from ParaboxService).</p><p><code>MainActivity</code> is used to display the main interface of the plugin and provide users with interactive control over the service. The interface is built using Compose.</p><p><code>ConnService</code> plays the role of the server, on the one hand, it is bound to the Parabox background service and undertakes the task of communicating with the master. On the other hand, it is bound to MainActivity to provide running status updates to the main interface. This means that any communication between MainActivity and Parabox must go through it. It is also the core unit for receiving and sending messages from various platforms.</p><p>To reduce complexity and aid understanding, this project only references necessary dependencies. If you need navigation, data persistence or more, you can add <code>Navigation</code>, <code>Room</code>, etc.</p><table><thead><tr><th>dependencies</th><th style="text-align:left;">uses</th></tr></thead><tbody><tr><td>Parabox Development Kit</td><td style="text-align:left;">Parabox Extension Development Kit</td></tr><tr><td><a href="https://developer.android.com/training/dependency-injection/hilt-android" target="_blank" rel="noopener noreferrer">Hilt<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></td><td style="text-align:left;">Dependency Injection Library</td></tr><tr><td><a href="https://developer.android.com/topic/libraries/architecture/datastore" target="_blank" rel="noopener noreferrer">DataStore<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></td><td style="text-align:left;">Key-value store</td></tr><tr><td><a href="https://developer.android.com/topic/libraries/architecture/viewmodel" target="_blank" rel="noopener noreferrer">ViewModel<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></td><td style="text-align:left;">Architecture</td></tr></tbody></table><h3 id="configuration" tabindex="-1"><a class="header-anchor" href="#configuration" aria-hidden="true">#</a> Configuration</h3><p>In this template project, the necessary changes you need to make are marked with <code>// TODO</code>. A little trick is to open the TODO window in Android Studio and go through each TODO comment in turn and make changes.</p><p>1. Click on TODO 1 in the TODO window, located in build.gradle. Replace <code>com.parabox.example</code> with your package name. You need to use the Rename function to change the directory tree name synchronously.</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code>android <span class="token punctuation">{</span>
<span class="token comment">//    TODO 1 : Set your extension&#39;s Package Name.</span>
    namespace &#39;com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>myextension&#39;
    compileSdk <span class="token number">33</span>

    defaultConfig <span class="token punctuation">{</span>
        applicationId <span class="token string-literal singleline"><span class="token string">&quot;com.android.myextension&quot;</span></span>
        minSdk <span class="token number">26</span>
        targetSdk <span class="token number">33</span>
        versionCode <span class="token number">1</span>
        versionName <span class="token string-literal singleline"><span class="token string">&quot;1.0&quot;</span></span>

        <span class="token operator">..</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>
    <span class="token operator">..</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2. Click TODO 2 in the TODO window, which is located in AndroidManifest.xml. Update the <code>connection_type</code> and <code>connection_name</code> values. And update <code>android:label</code> to your plugin name.</p><p><code>connection_type</code> needs to be filled with Int type. This value is used to distinguish different plug-ins. Please ensure that this value is unique among the installed plug-ins.</p><p><code>connection_name</code> needs to be filled in String type. This value is used to display the plugin name on the main app.</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>manifest</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://schemas.android.com/apk/res/android<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://schemas.android.com/tools<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    ...

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>application</span>
        <span class="token attr-name">...</span>

        <span class="token attr-name"><span class="token namespace">android:</span>label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@string/my_app_name<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">...</span>
        <span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!-- TODO 2: Set your extension&#39;s Type and Name here.--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta-data</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>connection_type<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">android:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1234<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta-data</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>connection_name<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">android:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Extension<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        ...
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>application</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>manifest</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3. Click TODO 2-1 in the TODO window, which is located in AndroidManifest.xml. Configure basic information (profile, developer, etc.) for your plugin. At the same time, the numbers <code>0, 1 and 2</code> describe the plugin&#39;s support for six basic message contents. <strong><code>0</code> means no support, <code>1</code> means receive only, <code>2</code> means full support (receive and send)</strong>. The configuration will be displayed on the <code>Extensions</code> settings page. (Added in v.1.0.5-beta)</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>manifest</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://schemas.android.com/apk/res/android<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://schemas.android.com/tools<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    ...

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>application</span>
        <span class="token attr-name">...</span>
        <span class="token attr-name">&lt;!--</span> <span class="token attr-name">TODO</span> <span class="token attr-name"><span class="token namespace">2-1:</span></span> <span class="token attr-name">Configure</span> <span class="token attr-name">basic</span> <span class="token attr-name">information</span> <span class="token attr-name">for</span> <span class="token attr-name">your</span> <span class="token attr-name">extension--</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta-data</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>author<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">android:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Parabox<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta-data</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>description<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">android:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Parabox Extension Example<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta-data</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>plain_text_support<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">android:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta-data</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image_support<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">android:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta-data</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>audio_support<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">android:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta-data</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file_support<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">android:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta-data</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>at_support<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">android:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta-data</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>quote_reply_support<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">android:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        ...
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>application</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>manifest</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>4. Compile and install the app to your test device. If all goes well, your plugin should be discoverable and displayed in the main app. The plug-in information will be displayed in the status detection dialog of the home page and the extension category of the settings page (if not, try restarting the main app). Try to start the service, the service status displayed on the main app will be updated in time.</p><p>Click &quot;Send a test message&quot; in the test area, and the main app should receive the message from the plugin. After the master responds, the text of the reply message should pop up with <code>Snackbar</code> on the interface of the plugin. The mechanism of operation here will be explained later.</p><h3 id="development-guidelines" tabindex="-1"><a class="header-anchor" href="#development-guidelines" aria-hidden="true">#</a> Development Guidelines</h3><p>Click on TODO 3 in the TODO window, which is located in ConnService.kt. In the <code>onStartParabox</code> method, delete the sample implementation and write your own service startup code. As the example implementation demonstrates, you can use the <code>updateServiceState</code> method to update the service state while startup is in progress. Optional service states include <code>STOP</code> , <code>PAUSE</code> , <code>ERROR</code> , <code>LOADING</code> , <code>RUNNING</code>. Status updates will be instantly reflected to the front end.</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code>lifecycleScope<span class="token punctuation">.</span><span class="token function">launch</span> <span class="token punctuation">{</span>

<span class="token comment">// TODO 3: Delete the code below, then write your own startup process</span>
    <span class="token function">updateServiceState</span><span class="token punctuation">(</span>ParaboxKey<span class="token punctuation">.</span>STATE_LOADING<span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">&quot;Step A&quot;</span></span><span class="token punctuation">)</span>
    <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span>
    <span class="token function">updateServiceState</span><span class="token punctuation">(</span>ParaboxKey<span class="token punctuation">.</span>STATE_LOADING<span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">&quot;Step B&quot;</span></span><span class="token punctuation">)</span>
    <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span>
    <span class="token function">updateServiceState</span><span class="token punctuation">(</span>ParaboxKey<span class="token punctuation">.</span>STATE_PAUSE<span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">&quot;Step C&quot;</span></span><span class="token punctuation">)</span>
    <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span>
    <span class="token function">updateServiceState</span><span class="token punctuation">(</span>ParaboxKey<span class="token punctuation">.</span>STATE_LOADING<span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">&quot;Step D&quot;</span></span><span class="token punctuation">)</span>
    <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span>
    <span class="token function">updateServiceState</span><span class="token punctuation">(</span>ParaboxKey<span class="token punctuation">.</span>STATE_RUNNING<span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">&quot;Step E&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Then choose to implement some of other abstract methods such as <code>customHandleMessage</code>, <code>onMainAppLaunch</code>, <code>onRecallMessage</code> according to your needs. For details, please refer to the development kit documentation.</p><h3 id="communication-mechanism" tabindex="-1"><a class="header-anchor" href="#communication-mechanism" aria-hidden="true">#</a> Communication Mechanism</h3><p>The Parabox plug-in communication mechanism is based on <a href="(https://developer.android.com/reference/android/os/Messenger)">Messenger</a>, and the development kit has carried out the necessary encapsulation. According to the communication object, whether or not to send back authentication is divided into three categories: <code>Request</code>, <code>COMMAND</code> and <code>NOTIFICATION</code>.</p><table><thead><tr><th>Type</th><th>Send With</th><th>Respond With</th><th>Sender</th><th>Responder</th></tr></thead><tbody><tr><td>Request (Request)</td><td><code>sendRequest</code></td><td><code>sendRequestResponse</code></td><td>ParaboxService</td><td>ParaboxActivity or master</td></tr><tr><td>command(COMMAND)</td><td><code>sendCommand</code></td><td><code>sendCommandResponse</code></td><td>ParaboxActivity or master</td><td>ParaboxService</td></tr><tr><td>Notification (NOTIFICATION)</td><td><code>sendNotification</code></td><td><code>-</code></td><td>ParaboxActivity, ParaboxService, or master</td><td>-</td></tr></tbody></table><p><code>Request</code>, <code>COMMAND</code> have their own loopback authentication and timeout mechanisms. It is guaranteed that each communication must trigger the <code>onResult</code> callback within the timeout period. The returned <code>ParaboxResult</code> carries the data returned by the request successfully or the error code returned by the request failure. Often used for logic that needs to be sure to get a reply before proceeding. Such as message sending/receiving, updating configuration, etc.</p><p>The internal implementation of <code>Request</code> and <code>COMMAND</code> uses Kotlin coroutines, such as using [CompletableDeferred](https://kotlinlang.org/api/kotlinx.coroutines/kotlinx-coroutines-core /kotlinx.coroutines/-completable-deferred/) implements pending wait. If the callback method is not suitable for your development needs, you can also rewrite it in the form of a suspending function through simple encapsulation:</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">suspend</span> <span class="token keyword">fun</span> <span class="token function">sendRequest</span><span class="token punctuation">(</span>
    request<span class="token operator">:</span> Int<span class="token punctuation">,</span>
    client<span class="token operator">:</span> Int<span class="token punctuation">,</span>
    extra<span class="token operator">:</span> Bundle<span class="token punctuation">,</span>
    timeoutMillis<span class="token operator">:</span> Long<span class="token punctuation">,</span>
<span class="token punctuation">)</span> <span class="token operator">:</span> ParaboxResult <span class="token punctuation">{</span>
    <span class="token keyword">return</span> suspendCoroutine<span class="token operator">&lt;</span>ParaboxResult<span class="token operator">&gt;</span> <span class="token punctuation">{</span> cont <span class="token operator">-&gt;</span>
        <span class="token function">sendRequest</span><span class="token punctuation">(</span>
            request <span class="token operator">=</span> request<span class="token punctuation">,</span>
            client <span class="token operator">=</span> client<span class="token punctuation">,</span>
            extra <span class="token operator">=</span> extra<span class="token punctuation">,</span>
            timeoutMillis <span class="token operator">=</span> timeoutMillis<span class="token punctuation">,</span>
        <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>it <span class="token keyword">is</span> ParaboxResult<span class="token punctuation">.</span>Success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                cont<span class="token punctuation">.</span><span class="token function">resume</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token keyword">val</span> errorCode <span class="token operator">=</span> <span class="token punctuation">(</span>it <span class="token keyword">as</span> ParaboxResult<span class="token punctuation">.</span>Fail<span class="token punctuation">)</span><span class="token punctuation">.</span>errorCode
                cont<span class="token punctuation">.</span><span class="token function">resumeWithException</span><span class="token punctuation">(</span><span class="token function">Exception</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">errorCode</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The transmission method and processing logic of <code>Request</code> and <code>COMMAND</code> are basically the same, only the sender and the responder differ. <code>sendRequest</code> also needs to provide an additional target parameter. Since there is usually a host and ParaboxActivity connected to ParaboxService at the same time, it can be specified by passing <code>CLIENT_MAIN_APP</code> or <code>CLIENT_CONTROLLER</code> for the <code>client</code> parameter.</p><p><code>NOTIFICATION</code> is initiated by either party and does not require a reply. There is no guarantee that the recipient will receive it successfully. Often used for logic that is sent frequently and does not require a reply. Such as logs, status updates, etc.</p><p>To help you quickly understand the communication mechanism of the plug-in, this project provides two simple examples: <strong>send a message to Parabox from the main interface of the plug-in</strong> (this is not common, the message is usually received from the Service and then delivered to the client), And <strong>send a message from Parabox to the main interface of the plug-in</strong> (the result here is a Toast popping up), the example shows two different forms of transmission and transmission in different directions.</p><h4 id="communication-that-requires-loopback-authentication-take-command-as-an-example" tabindex="-1"><a class="header-anchor" href="#communication-that-requires-loopback-authentication-take-command-as-an-example" aria-hidden="true">#</a> Communication that requires loopback authentication (take command as an example)</h4><p>1. Click TODO 4 in the TODO window and declare an Int constant that identifies the <code>command</code>. In this case <code>COMMAND_RECEIVE_TEST_MESSAGE</code> in <code>CustomKey</code>.</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">object</span> CustomKey <span class="token punctuation">{</span>
    <span class="token comment">// TODO 4: Added static Key constants for commands</span>
    <span class="token keyword">const</span> <span class="token keyword">val</span> COMMAND_RECEIVE_TEST_MESSAGE <span class="token operator">=</span> <span class="token number">9999</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2. Click on TODO 5 in the TODO window, browse the <code>receiveTestMessage</code> implementation, and learn how to use <code>sendCommand</code> to pass in command constants, carry extra data, and send commands.</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">receiveTestMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// TODO 5 : Call sendCommand function with COMMAND_RECEIVE_TEST_MESSAGE</span>
    <span class="token function">sendCommand</span><span class="token punctuation">(</span>
        command <span class="token operator">=</span> CustomKey<span class="token punctuation">.</span>COMMAND_RECEIVE_TEST_MESSAGE<span class="token punctuation">,</span>
        extra <span class="token operator">=</span> <span class="token function">Bundle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span> <span class="token punctuation">{</span>
            <span class="token function">putString</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;content&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">&quot;...&quot;</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        timeoutMillis <span class="token operator">=</span> <span class="token number">3000</span><span class="token punctuation">,</span>
        onResult <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token operator">..</span><span class="token punctuation">.</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3. Click TODO 6 in the TODO window, browse the <code>customHandleMessage</code> implementation, and learn how to use <code>msg.what</code> to identify the command type and call the corresponding method. Additional data to carry is available from <code>msg.obj</code>. To call <code>sendCommandResponse</code> later, pass in <code>metadata</code> as a parameter.</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">customHandleMessage</span><span class="token punctuation">(</span>msg<span class="token operator">:</span> Message<span class="token punctuation">,</span> metadata<span class="token operator">:</span> ParaboxMetadata<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">when</span> <span class="token punctuation">(</span>msg<span class="token punctuation">.</span>what<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// TODO 6: Handle custom command</span>
        CustomKey<span class="token punctuation">.</span>COMMAND_RECEIVE_TEST_MESSAGE <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">receiveTestMessage</span><span class="token punctuation">(</span>msg<span class="token punctuation">,</span> metadata<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>4. Click on TODO 7 in the TODO window and browse the <code>receiveTestMessage</code> implementation to learn how to use <code>sendCommandResponse</code> to send back the command result. If <code>sendCommandResponse</code> is not called, the timeout mechanism of the original command will be triggered and <code>ParaboxResult</code> with <code>ERROR_TIMEOUT</code> will be returned.</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">receiveTestMessage</span><span class="token punctuation">(</span>msg<span class="token operator">:</span> Message<span class="token punctuation">,</span> metadata<span class="token operator">:</span> ParaboxMetadata<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token operator">..</span><span class="token punctuation">.</span>
    <span class="token comment">// TODO 7 : Call sendCommandResponse when the job is done</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>it <span class="token keyword">is</span> ParaboxResult<span class="token punctuation">.</span>Success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">sendCommandResponse</span><span class="token punctuation">(</span>
            isSuccess <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            metadata <span class="token operator">=</span> metadata<span class="token punctuation">,</span>
            extra <span class="token operator">=</span> <span class="token function">Bundle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span> <span class="token punctuation">{</span>
                <span class="token function">putString</span><span class="token punctuation">(</span>
                    <span class="token string-literal singleline"><span class="token string">&quot;message&quot;</span></span><span class="token punctuation">,</span>
                    <span class="token string-literal singleline"><span class="token string">&quot;Message received at </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">System<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span></span>
                <span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">sendCommandResponse</span><span class="token punctuation">(</span>
            isSuccess <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            metadata <span class="token operator">=</span> metadata<span class="token punctuation">,</span>
            errorCode <span class="token operator">=</span> <span class="token punctuation">(</span>it <span class="token keyword">as</span> ParaboxResult<span class="token punctuation">.</span>Fail<span class="token punctuation">)</span><span class="token punctuation">.</span>errorCode
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5. After finishing the above process, delete the sample code.</p><h4 id="one-way-one-way-communication-take-notification-as-an-example" tabindex="-1"><a class="header-anchor" href="#one-way-one-way-communication-take-notification-as-an-example" aria-hidden="true">#</a> One-way one-way communication (take notification as an example)</h4><p>1. Click TODO 8 in the TODO window and declare an Int constant that identifies the command. In this case, <code>NOTIFICATION_SHOW_TEST_MESSAGE_SNACKBAR</code> in <code>CustomKey</code>.</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">object</span> CustomKey <span class="token punctuation">{</span>
    <span class="token comment">// TODO 8: Added static Key constants for notifications</span>
    <span class="token keyword">const</span> <span class="token keyword">val</span> NOTIFICATION_SHOW_TEST_MESSAGE_SNACKBAR <span class="token operator">=</span> <span class="token number">9998</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2. Click on TODO 9 in the TODO window, browse the <code>showTestMessageSnackbar</code> implementation, and learn how to use <code>sendNotification</code> to pass in notification constants, carry extra data, and send notifications.</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token comment">// TODO 9 : Call sendNotification function with NOTIFICATION_SHOW_TEST_MESSAGE_SNACKBAR</span>
<span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">showTestMessageSnackbar</span><span class="token punctuation">(</span>message<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">sendNotification</span><span class="token punctuation">(</span>CustomKey<span class="token punctuation">.</span>NOTIFICATION_SHOW_TEST_MESSAGE_SNACKBAR<span class="token punctuation">,</span> <span class="token function">Bundle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span> <span class="token punctuation">{</span>
        <span class="token function">putString</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;message&quot;</span></span><span class="token punctuation">,</span> message<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3. Click TODO 10 in the TODO window, browse the <code>customHandleMessage</code> implementation, and learn how to use <code>msg.what</code> to identify the notification type and call the corresponding method. Additional data to carry is available from <code>msg.obj</code>. Since there is no loopback, there is no need to pass in <code>metadata</code>.</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">customHandleMessage</span><span class="token punctuation">(</span>msg<span class="token operator">:</span> Message<span class="token punctuation">,</span> metadata<span class="token operator">:</span> ParaboxMetadata<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">when</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>what<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// TODO 10: Handle custom notification</span>
        CustomKey<span class="token punctuation">.</span>NOTIFICATION_SHOW_TEST_MESSAGE_SNACKBAR <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token punctuation">(</span>msg<span class="token punctuation">.</span>obj <span class="token keyword">as</span> Bundle<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;message&quot;</span></span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">also</span> <span class="token punctuation">{</span>
                <span class="token function">showTestMessageSnackbar</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>4. After finishing the above process, delete the sample code.</p><p>And for common communication use cases, the SDK has been packaged into easy-to-call methods. Its internal implementation still uses <code>REQUEST</code> , <code>COMMAND</code> and <code>NOTIFICATION</code>. Please refer to <a href="/en/developer/#common-use-cases" class="">Common Use Cases</a>.</p><h3 id="common-use-cases" tabindex="-1"><a class="header-anchor" href="#common-use-cases" aria-hidden="true">#</a> Common Use Cases</h3><h4 id="receive-message" tabindex="-1"><a class="header-anchor" href="#receive-message" aria-hidden="true">#</a> Receive message</h4><p><code>Receive message</code> takes the Parabox main side as the perspective, that is, the process that the plug-in receives the message from the message source and delivers it to the main side. The SDK provides the <code>receiveMessage</code> method for this use case. The key to using this method is to generate an instance of <code>ReceiveMessageDto</code>.</p><table><thead><tr><th>parameters</th><th>description</th></tr></thead><tbody><tr><td>List of</td><td>contents</td></tr><tr><td>Instance of</td><td>profile</td></tr><tr><td>Instance of</td><td>subjectProfile</td></tr><tr><td>timestamp</td><td>message reception time timestamp</td></tr><tr><td>messageId</td><td>needs to be unique to uniquely identify the message. It is allowed to be empty, and the database will automatically assign an id to it, but emptying it will cause message recall, cache mechanism, etc. to fail.</td></tr><tr><td>pluginConnection</td><td>is used to describe the connection information of the session to which this message belongs. Please refer to the table below in combination</td></tr></tbody></table><table><thead><tr><th>parameters</th><th>description</th></tr></thead><tbody><tr><td>connectionType</td><td>must be the same as the META_DATA declaration value in AndroidManifest.xml. For the acquisition method, please refer to the sample project.</td></tr><tr><td>sendTargetType</td><td>Describes the current session type. Optional <code>SendTargetType.USER</code> or <code>SendTargetType.GROUP</code></td></tr><tr><td>id</td><td>is used to uniquely identify the current session. It needs to be consistent with the id in the subjectProfile in the above table</td></tr></tbody></table><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">receiveTestMessage</span><span class="token punctuation">(</span>msg<span class="token operator">:</span> Message<span class="token punctuation">,</span> metadata<span class="token operator">:</span> ParaboxMetadata<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// TODO 11 : Receive Message</span>
    <span class="token keyword">val</span> contactId <span class="token operator">=</span> <span class="token number">1L</span>
    <span class="token keyword">val</span> profile <span class="token operator">=</span> <span class="token function">Profile</span><span class="token punctuation">(</span>
        name <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;anonymous&quot;</span></span><span class="token punctuation">,</span>
        avatar <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;https://gravatar.loli.net/avatar/d41d8cd98f00b204e9800998ecf8427e?d=mp&amp;v=1.5.1&quot;</span></span><span class="token punctuation">,</span>
        id <span class="token operator">=</span> contactId
    <span class="token punctuation">)</span>
    <span class="token function">receiveMessage</span><span class="token punctuation">(</span>
        <span class="token function">ReceiveMessageDto</span><span class="token punctuation">(</span>
            contents <span class="token operator">=</span> <span class="token function">listOf</span><span class="token punctuation">(</span><span class="token function">PlainText</span><span class="token punctuation">(</span>text <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;content&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            profile <span class="token operator">=</span> profile<span class="token punctuation">,</span>
            subjectProfile <span class="token operator">=</span> profile<span class="token punctuation">,</span>
            timestamp <span class="token operator">=</span> System<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            messageId <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
            pluginConnection <span class="token operator">=</span> <span class="token function">PluginConnection</span><span class="token punctuation">(</span>
                connectionType <span class="token operator">=</span> connectionType<span class="token punctuation">,</span>
                sendTargetType <span class="token operator">=</span> SendTargetType<span class="token punctuation">.</span>USER<span class="token punctuation">,</span>
                id <span class="token operator">=</span> contactId
            <span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        onResult <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token operator">..</span><span class="token punctuation">.</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The execution result of the above code should be shown as below:</p><p><img src="/images/1.png" alt="message received"></p><h4 id="send-a-message" tabindex="-1"><a class="header-anchor" href="#send-a-message" aria-hidden="true">#</a> Send a message</h4><p>The SDK provides the <code>onSendMessage</code> method for this use case. The key to using this method is to get the required information from the only parameter <code>SendMessageDto</code>.</p><table><thead><tr><th>parameters</th><th>description</th></tr></thead><tbody><tr><td>List of</td><td>contents</td></tr><tr><td>timestamp</td><td>message sending time timestamp</td></tr><tr><td>pluginConnection</td><td>is used to describe the connection information of the session to which this message belongs. Please refer to the table above in combination</td></tr><tr><td>messageId</td><td>Uniquely identifies this message and is generated by the system. It is recommended to temporarily save as a map to recall this message</td></tr></tbody></table><p>The method is a suspend function. Returns <code>true</code> after confirming that the sending is complete, otherwise returns <code>false</code>.</p><h4 id="withdraw-a-message" tabindex="-1"><a class="header-anchor" href="#withdraw-a-message" aria-hidden="true">#</a> Withdraw a message</h4><p>The SDK provides the <code>onRecallMessage</code> method for this use case. Only one parameter of messageId is provided, which needs to be used together with the messageId saved when sending the message.</p><p>The method is a suspend function. After confirming that the withdrawal is successful, return <code>true</code>, otherwise return <code>false</code>. If retraction is not supported, <code>false</code> can also be returned directly.</p><h2 id="from-scratch" tabindex="-1"><a class="header-anchor" href="#from-scratch" aria-hidden="true">#</a> From Scratch</h2><p>To learn how to use the toolkit, please refer to <a href="/en/parabox-development-kit">Development Kit Documentation</a>.</p></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: ojhdtmail@gmail.com">ojhdt</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app-2d8419d4.js" defer></script>
  </body>
</html>
